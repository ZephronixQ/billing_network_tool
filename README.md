# billing_network_tool

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ ONU –Ω–∞ OLT (ZTE ZXAN), –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö **–∑–∞ –æ–¥–Ω—É Telnet-—Å–µ—Å—Å–∏—é** —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º.

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –≤ —Å–µ—Ç—è—Ö –¥–æ—Å—Ç—É–ø–∞ (GPON/FTTx) –∏ —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∞–±–æ–Ω–µ–Ω—Ç—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ü–æ–∏—Å–∫ ONU –ø–æ —Å–µ—Ä–∏–π–Ω–æ–º—É –Ω–æ–º–µ—Ä—É
* –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (PON)
* –°–±–æ—Ä IP-—Å—Ç–∞—Ç—É—Å–∞ (IP / MAC / VLAN)
* –ê–Ω–∞–ª–∏–∑ DHCP snooping
* –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—Ç–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π (PON power)
* –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ONU –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
* –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ç—Ä–∞—Ñ–∏–∫–∞
* –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ (authpass / offline / cause)
* –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (asyncio)
* **–û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å ‚Äî –æ–¥–Ω–∞ Telnet-—Å–µ—Å—Å–∏—è ‚Äî –æ–¥–∏–Ω –±—É—Ñ–µ—Ä –¥–∞–Ω–Ω—ã—Ö**

---

## –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1. One Session ‚Äì One Request

–ü–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ONU **–≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–∏–º `send_bulk`**, –∞ –≤—Å–µ –ø–∞—Ä—Å–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç **—Å—Ç—Ä–æ–≥–æ –ø–æ –æ–¥–Ω–æ–º—É `raw_all` –±—É—Ñ–µ—Ä—É**.

–≠—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç:

* race condition
* –ø–æ—Ç–µ—Ä—é –≤—ã–≤–æ–¥–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
* –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å IP-–ø–∞—Ä—Å–∏–Ω–≥–∞
* –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

–ü—Ä–æ–µ–∫—Ç **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç**:

* –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
* sleep / retry
* –≤—Ç–æ—Ä–∏—á–Ω—ã–µ Telnet-–≤—ã–∑–æ–≤—ã

–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –æ–∂–∏–¥–∞–Ω–∏–µ–º –ø–æ–ª–Ω–æ–≥–æ CLI-–≤—ã–≤–æ–¥–∞.

---

### 3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

* `connection/` ‚Äî —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ Telnet
* `commands/` ‚Äî —Ç–æ–ª—å–∫–æ CLI-–∫–æ–º–∞–Ω–¥—ã
* `parsers/` ‚Äî —Ç–æ–ª—å–∫–æ –ø–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞
* `adapter` ‚Äî orchestration –ª–æ–≥–∏–∫–∞

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
billing_network_tool/
‚îÇ
‚îú‚îÄ‚îÄ main.py                     # CLI entrypoint
‚îÇ
‚îú‚îÄ‚îÄ cli/
‚îÇ   ‚îú‚îÄ‚îÄ args.py                 # argparse
‚îÇ   ‚îú‚îÄ‚îÄ commands.py             # CLI routing
‚îÇ   ‚îî‚îÄ‚îÄ help.py                 # CLI help
‚îÇ
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ connection/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telnet.py           # connect(), send_bulk()
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ operations/
‚îÇ       ‚îî‚îÄ‚îÄ onu/
‚îÇ           ‚îú‚îÄ‚îÄ adapter.py      # ZteZxanOltAdapter
‚îÇ           ‚îú‚îÄ‚îÄ commands/
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ zte_zxan.py # SHOW_* commands
‚îÇ           ‚îî‚îÄ‚îÄ parsers/
‚îÇ               ‚îú‚îÄ‚îÄ search.py
‚îÇ               ‚îú‚îÄ‚îÄ ip_status.py
‚îÇ               ‚îú‚îÄ‚îÄ pon_power.py
‚îÇ               ‚îú‚îÄ‚îÄ speed.py
‚îÇ               ‚îî‚îÄ‚îÄ detail_logs.py
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ devices.yaml
‚îÇ   ‚îî‚îÄ‚îÄ secrets.py
‚îÇ
‚îú‚îÄ‚îÄ output/
‚îÇ   ‚îú‚îÄ‚îÄ colors.py
‚îÇ   ‚îî‚îÄ‚îÄ tables.py
‚îÇ
‚îî‚îÄ‚îÄ requirements.txt
```

---

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
python3 main.py --sn HWTCAF67713E
```

---

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```text
‚úÖ ONU FOUND
IP:        192.168.2.19
PORT:      1/1/1:1
SERIAL:    XCTFAF21084E

üåê IP STATUS
IP:    10.114.15.25
MAC:   0C14.11aa.88cf
VLAN:  2025

üì° PON POWER
RX: -23.4 dBm ...
TX:  2.1 dBm  ...

‚ö° SPEED / THROUGHPUT
Input:  98 Mbit/s
Output: 12 Mbit/s

üìù ONU DETAIL LOGS
Authpass / Offline / Cause
...
```

---

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ

* ZTE ZXAN OLT
* GPON ONU

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

* –ü—Ä–æ–µ–∫—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **ZTE ZXAN CLI**
* –î–ª—è –¥—Ä—É–≥–∏—Ö –≤–µ–Ω–¥–æ—Ä–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π adapter
